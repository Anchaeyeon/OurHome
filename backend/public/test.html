<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>그룹 생성</title>
</head>

<body>
    <h1>그룹 생성</h1>
    <form id="createGroupForm">
        <label for="groupName">그룹 이름:</label>
        <input type="text" id="groupName" required>
        <button type="submit">그룹 생성</button>
    </form>

    <h2>그룹 목록</h2>
    <ul id="groupList"></ul>

    <script>
        // 그룹 생성 처리
        document.getElementById('createGroupForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const groupName = document.getElementById('groupName').value;

            fetch('/createGroup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ groupName })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.message === '그룹이 생성되었습니다.') {
                        alert(data.message);
                        loadGroups();
                    }
                })
                .catch(err => alert('그룹 생성에 실패했습니다.'));
        });

    function loadGroups() {
        fetch('/groups')
            .then(response => response.json())
            .then(data => {
                const groupList = document.getElementById('groupList');
                groupList.innerHTML = '';
                data.groups.forEach(group => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="/group/${group.id}">${group.name}</a>`;
                    groupList.appendChild(li);
                });
            });
    }
    </script>
</body>

</html>